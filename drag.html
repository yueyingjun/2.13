<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title></title>
	</head>
	<style>
		*{
			padding: 0;
			margin: 0;
			list-style: none;
		}
		.box{
			width: 100px;
			height: 100px;
			background: orangered;
			border: 1px solid peru;
			position: absolute;
			left: 0;
			top: 0;
		}
	</style>
	<body>
		<div class="box"></div>
	</body>
	<script>
//		var box=document.getElementsByClassName("box")[0]
//		var cw=document.documentElement.clientWidth
//		var ch=document.documentElement.clientHeight
//		var ow=box.offsetWidth
//		var oh=box.offsetHeight
//		var x1=cw-ow
//		var y1=ch-oh
//		
//		box.onmousedown=function(e){
//			var ev=e||window.event
//			var ox=ev.offsetX
//			var oy=ev.offsetY
//			
//			var startx,starty,endx,endy,lenx,leny;
//      	startx=ox;
//      	starty=oy;
//			document.onmousemove=function(e){
//				var ev=e||window.event
//				var cx=ev.clientX
//				var cy=ev.clientY
//				var x=cx-ox
//				var y=cy-oy
//				if(x<=0){x=0}
//				if(y<=0){y=0}
//				if(x>=x1){x=x1}
//				if(y>=y1){y=y1}
//				box.style.left=x+"px"
//				box.style.top=y+"px"
//				
//				endx=x;
//              endy=y;
//              lenx=endx-startx;
//              leny=endy-starty;
//              startx=endx;
//              starty=endy;
//			}
//			document.onmouseup=function(){
//				var xishu=0.8
//				var t=setInterval(function(){
//					lenx*=xishu;
//      			leny*=xishu;
//      			if(Math.abs(lenx)>=Math.abs(leny)){
//      				if(Math.abs(lenx)<=1){
//      					clearInterval(t)
//      				}else if(Math.abs(leny)<=1){
//      					clearInterval(t)
//      				}        				
//      			}
//      			box.style.left=lenx+box.offsetLeft+"px";
//                  box.style.top=leny+box.offsetTop+"px";
//				},50)
//				document.onmousemove=null
//				document.onmouseup=null
//			}
//			
//		}
//		
		//ec6
		
		class drag{
			constructor(obj){
				this.obj=obj;
				this.cw=document.documentElement.clientWidth;
				this.ch=document.documentElement.clientHeight;
				this.ow=this.obj.clientWidth;
				this.oh=this.obj.clientHeight;
				this.ox=0;
				this.oy=0;
				this.cx=0;
				this.cy=0;
				this.left=0;
				this.top=0;
			}
			drag(){
				this.down();
			}
			down(){
				var that=this;
				this.obj.onmousedown=function(e){
					var eve=e||window.event;
					that.ox=eve.offsetX;
					that.oy=eve.offsetY;
//					var startx,starty,endx,endy,lenx,leny;
//		        	startx=ox;
//		        	starty=oy;
					that.move();
					that.up();
				}
			}
			move(){
				var that=this;
				document.onmousemove=function(e){
					var eve=e||window.event;
					that.cx=eve.clientX;
					that.cy=eve.clientY;
					that.left=that.cx-that.ox;
					that.top=that.cy-that.oy;
					if(that.left<=0){
						that.left=0;
					}
					if(that.top<=0){
						that.top=0;
					}
					if(that.left>=that.cw-that.ow){
						that.left=that.cw-that.ow;
					}
					if(that.top>=that.ch-that.oh){
						that.top=that.ch-that.oh;
					}
					that.obj.style.left=that.left+"px";
					that.obj.style.top=that.top+"px";
					
//					endx=x;
//	                endy=y;
//	                lenx=endx-startx;
//	                leny=endy-starty;
//	                startx=endx;
//	                starty=endy;
	
				}
			}
			up(){
				document.onmouseup=function(){
//					var xishu=0.8
//					var t=setInterval(function(){
//						lenx*=xishu;
//	        			leny*=xishu;
//	        			if(Math.abs(lenx)>=Math.abs(leny)){
//	        				if(Math.abs(lenx)<=1){
//	        					clearInterval(t)
//	        				}else if(Math.abs(leny)<=1){
//	        					clearInterval(t)
//	        				}        				
//	        			}
//	        			obj.style.left=lenx+obj.offsetLeft+"px";
//	                    obj.style.top=leny+obj.offsetTop+"px";
//	               },50)
					document.onmousemove=null;
					document.onmouseup=null;
				}
	
			}
		
		}
		var obj=document.getElementsByClassName("box")[0];
		new drag(obj).drag();

		
	</script>
</html>
